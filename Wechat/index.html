
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>程汉艳的博客</title>
   <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <script scr="../Public/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../Public/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../Public/css/index.css" />
    <link rel="stylesheet" type="text/css" href="../Public/css/index.css" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="__PUBLIC__/js/html5shiv.min.js"></script>
      <script src="__PUBLIC__/js/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
        <header class="container-fluid">
                <div class="container">
                    <div class="col-md-8 col-xs-12 col-sm-8 title">
                        <h1>PHP</h1>
                    </div>
                </div>
        </header>


        <nav class="navbar navbar-default">
          <div class="container-fluid" id="nav">
            <div class="row">
                <div class="container">
                    <div class="col-md-12 col-xs-12 col-sm-12">
                            <!-- Brand and toggle get grouped for better mobile display -->
                            <div class="navbar-header">
                              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navHidden" aria-expanded="false">
                                <span class="sr-only">Toggle navigation</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                              </button>
                            
                            </div>

                            <!-- Collect the nav links, forms, and other content for toggling -->
                            <div class="collapse navbar-collapse" id="navHidden">

                              <ul class="nav navbar-nav">
                                <li class="active">
                                    <a href="#">首页 <span class="sr-only">(current)</span></a></li>
                    <li><a href="../PHP/safe.html">PHP</a></li>
                                <li><a href="./Wechat/index.html">微信开发</a></li>
                                <li><a href="./Linux/index.html" class="noContent">Linux</a></li>
                                <li><a href="./html/index.html">Git</a></li>
                                <li><a href="#" class="noContent">JavaScript</a></li>
                                <li><a href="#" class="noContent">大型Web架构</a></li>
                                <li><a href="#">好文分享</a></li>
                                <li><a href="#">工具</a></li>
                              
                              </ul>

                            </div><!-- /.navbar-collapse -->
                      </div><!-- /.container-fluid -->
                    </div>
                </div>
            </div>
           
        </nav>

        <!--主体部分-->
        <section class="container-fluid">
            <div class="container">

                <div class="col-md-8 mainLeft">

                    <article class="post">
                        <div class="title-div">
                            <h2>
                                封装函数
                            </h2>
                            <div>
                                作者：程汉艳 • 2016年7月15日
                            </div>
                        </div>

                        <div class="post-content">
                   <p> <?php</p>
    
    <p>/**</p>
     <p>* POST请求</p>
     <p>* @param  string $url  请求的地址</p>
     <p>* @param  array  $data 要传的参数</p>
     <p>* @return array       请求到的结果</p>
     <p>*/</p>
    <p>function post($url, $data = array()){</p>
       <p> $ch = curl_init($url);</p>
        <p>curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);    //以结果的方式返回你请求到的数据</p>
        <p>curl_setopt($ch, CURLOPT_POST, 1);</p>
        <p>curl_setopt($ch, CURLOPT_POSTFIELDS, $data);</p>
        <p>$res = curl_exec($ch);</p>
       <p>curl_close();</p>

       <p> return json_decode($res, true);</p>
    <p>}</p>

<p>
   <p> /**</p>
   <p>  * get请求</p>
    <p> * @param  string $url 请求的地址</p>
    <p> * @return array      请求到的结果</p>
    <p> */</p>
   <p> function get($url){</p>
       <p> $ch = curl_init();</p>
       <p> curl_setopt($ch, CURLOPT_URL, $url);</p>
       <p> curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);    //以结果的方式返回你请求到的数据</p>
        <p>$res = curl_exec($ch);</p>
        <p>curl_close();</p>

        <p>$arr = json_decode($res, true);</p>
        <p>return $arr;   </p>
    <p>}</p>
</p>
    <p>function token(){
        <p>if(file_exists('./token.txt') && (filemtime('./token.txt') + 7000) > time()){</p>
            <p>return file_get_contents('./token.txt');</p>
        <p>}else{</p>
           <p> //获取access_token的接口地址，get</p>
           <p> $url = 'https://api.weixin.qq.com/cgi-bin/</p>token?grant_type=client_credential&appid=wx158f53e91673d425&secret=08521cc67f78f65a3e6438d0a723804f';</p>

           <p> $res = get($url);</p>
            <p>file_put_contents('./token.txt', $res['access_token']);</p>
           <p> return $res['access_token'];</p>
        <p>}</p>

    }
                        </div>

                    </article>
                    
                
                </div>
                <aside class="col-md-3 hidden-sm hidden-xs mainRight ">
                    <div class="widget">
                        <div class="aside">
                            <h4>近期文章</h4>
                        </div>
                        <div class="content">
                            <p>
                                <a href="#">
                                    搭建Git服务器
                                </a>
                                
                            </p>
                            <p>
                                <a href="">
                                    从HTTP协议角度看GET与POST请求的区别
                                </a>
                                
                            </p>
                        </div>
                    </div>


                </aside>


            </div>



        </section>
               <nav class="pagination" role="navigation">

              <span class="page-number">第 1 页 ⁄ 共 2 页</span>
              <a class="newer-posts" href="./safe1.html">
                <i class="fa fa-angle-left">&gt;</i>
              </a>
            </nav>   
   
    <script src="../Public/js/jquery.js"></script>
  
    <script src="../Public/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>

